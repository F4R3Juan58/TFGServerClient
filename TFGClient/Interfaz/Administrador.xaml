<?xml version="1.0" encoding="utf-8"?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="TFGClient.Interfaz.Administrador"
             Title="Administrador"
             BackgroundColor="#F5F5F5">

    <!-- Recursos de la página -->
    <ContentPage.Resources>
        <ResourceDictionary>
            <!-- Colores EducaMadrid -->
            <Color x:Key="PrimaryColor">#00539F</Color>
            <Color x:Key="SecondaryColor">#00AEEF</Color>
            <Color x:Key="AccentColor">#FFD200</Color>
            <Style TargetType="Frame" x:Key="CardStyle">
                <Setter Property="CornerRadius" Value="16" />
                <Setter Property="Padding" Value="20" />
                <Setter Property="Margin" Value="12" />
                <Setter Property="HasShadow" Value="True" />
                <Setter Property="BackgroundColor" Value="White" />
            </Style>
            <Style TargetType="Button" x:Key="PrimaryButton">
                <Setter Property="BackgroundColor" Value="{StaticResource PrimaryColor}" />
                <Setter Property="TextColor" Value="White" />
                <Setter Property="CornerRadius" Value="10" />
                <Setter Property="FontAttributes" Value="Bold" />
                <Setter Property="HeightRequest" Value="50" />
                <Setter Property="Margin" Value="6" />
            </Style>
            <Style TargetType="Button" x:Key="SecondaryButton">
                <Setter Property="BackgroundColor" Value="{StaticResource SecondaryColor}" />
                <Setter Property="TextColor" Value="White" />
                <Setter Property="CornerRadius" Value="10" />
                <Setter Property="FontAttributes" Value="Bold" />
                <Setter Property="HeightRequest" Value="50" />
                <Setter Property="Margin" Value="6" />
            </Style>
            <Style TargetType="Label" x:Key="SectionHeader">
                <Setter Property="FontSize" Value="22" />
                <Setter Property="FontAttributes" Value="Bold" />
                <Setter Property="TextColor" Value="{StaticResource PrimaryColor}" />
                <Setter Property="Margin" Value="0,0,0,12" />
            </Style>
            <Style TargetType="Label" x:Key="FieldLabel">
                <Setter Property="FontSize" Value="16" />
                <Setter Property="VerticalOptions" Value="Center" />
                <Setter Property="TextColor" Value="Black" />
                <Setter Property="Margin" Value="0,0,8,0" />
            </Style>

            <Style TargetType="Entry" x:Key="FieldEntry">
                <Setter Property="FontSize" Value="16" />
                <Setter Property="VerticalOptions" Value="Center" />
                <Setter Property="TextColor" Value="Black" />
                <Setter Property="Margin" Value="0,0,8,0" />
            </Style>

            <Style TargetType="Picker" x:Key="FieldPicker">
                <Setter Property="FontSize" Value="16" />
                <Setter Property="VerticalOptions" Value="Center" />
                <Setter Property="TextColor" Value="Black" />
                <Setter Property="Margin" Value="0,0,8,0" />
                <Setter Property="BackgroundColor" Value="LightGray"/>
            </Style>
        </ResourceDictionary>
    </ContentPage.Resources>

    <ScrollView>
        <VerticalStackLayout Padding="16" Spacing="24">

            <!-- Sección Servidor -->
            <Frame Style="{StaticResource CardStyle}">
                <VerticalStackLayout>
                    <Label Text="Gestión de Servidor" Style="{StaticResource SectionHeader}" />
                    <HorizontalStackLayout Spacing="12">
                        <VerticalStackLayout WidthRequest="120">
                            <Label Text="Familia" Style="{StaticResource FieldLabel}" />
                            <Picker x:Name="pickerFamilia" Style="{StaticResource FieldPicker}"/>
                        </VerticalStackLayout>
                        <VerticalStackLayout WidthRequest="120">
                            <Label Text="Curso" Style="{StaticResource FieldLabel}" />
                            <Picker x:Name="pickerCurso" Style="{StaticResource FieldPicker}"/>
                        </VerticalStackLayout>
                        <Button Text="+" Style="{StaticResource SecondaryButton}" WidthRequest="48" Clicked="OnAddServerEntry"/>
                    </HorizontalStackLayout>

                    <!-- Colección de entradas servidor -->
                    <CollectionView x:Name="collectionServerEntries"
                                    Margin="0,16,0,0"
                                    ItemsLayout="VerticalList"
                                    SelectionMode="None">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Frame CornerRadius="8" Padding="12" Margin="0,4"
                                       BackgroundColor="{StaticResource SecondaryColor}">
                                    <HorizontalStackLayout>
                                        <Label Text="{Binding Familia}" TextColor="White" FontAttributes="Bold" />
                                        <Label Text=", " TextColor="White" />
                                        <Label Text="{Binding Curso}" TextColor="White" />
                                    </HorizontalStackLayout>
                                </Frame>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>

                    <HorizontalStackLayout HorizontalOptions="Center" Margin="0,24,0,0">
                        <Button Text="Crear Servidor" Style="{StaticResource PrimaryButton}" WidthRequest="140"/>
                        <Button Text="Modificar Servidor" Style="{StaticResource SecondaryButton}" WidthRequest="140"/>
                        <Button Text="Restablecer Servidor" Style="{StaticResource SecondaryButton}" WidthRequest="140"/>
                    </HorizontalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- Sección Usuarios -->
            <Frame Style="{StaticResource CardStyle}">
                <VerticalStackLayout>
                    <Label Text="Administrar Usuarios" Style="{StaticResource SectionHeader}" />
                    <HorizontalStackLayout Spacing="12" VerticalOptions="Center">
                        <Label Text="Nombre" Style="{StaticResource FieldLabel}" />
                        <Entry x:Name="entryUserName" Placeholder="Introduce nombre" HorizontalOptions="FillAndExpand" Style="{StaticResource FieldEntry}" />
                        <Button Text="Buscar" Style="{StaticResource SecondaryButton}" WidthRequest="80" />
                    </HorizontalStackLayout>

                    <HorizontalStackLayout HorizontalOptions="Center" Margin="0,20,0,0">
                        <Button Text="Añadir Usuario" Style="{StaticResource PrimaryButton}" WidthRequest="160"/>
                        <Button Text="Modificar Usuario" Style="{StaticResource SecondaryButton}" WidthRequest="160"/>
                        <Button Text="Eliminar Usuario" Style="{StaticResource SecondaryButton}" WidthRequest="160"/>
                    </HorizontalStackLayout>

                    <!-- Colección de usuarios -->
                    <CollectionView x:Name="collectionUsers"
                                    Margin="0,16,0,0"
                                    ItemsLayout="VerticalList"
                                    SelectionMode="None">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Frame CornerRadius="8" Padding="12" Margin="0,4">
                                    <Grid ColumnDefinitions="Auto, *, Auto">
                                        <Label Text="{Binding Nombre}" FontAttributes="Bold" Grid.Column="0"/>
                                        <Label Text="{Binding Curso}" Grid.Column="1" HorizontalOptions="EndAndExpand"/>
                                        <Button Text="Editar" Style="{StaticResource SecondaryButton}" Grid.Column="2" WidthRequest="60"/>
                                    </Grid>
                                </Frame>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>

                </VerticalStackLayout>
            </Frame>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
